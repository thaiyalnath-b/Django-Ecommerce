{% extends 'base/base.html' %}

{% block title %}
Product Details
{% endblock %}

{% block content %}
<section id="products-container" class="d-flex row productdetail product-card" data-product-id="{{product.id}}" data-add-url = "{% url 'add_to_cart' %}">
    <div id="carouselExample" class="carousel slide col" data-bs-ride="carousel">
        {% include 'products/includes/productImageCarousel.html' %}
    </div>

    <div class="col details">
        <img src="{{product.thumbnail.url}}" alt="">
        <h2>{{product.title}}</h2>
        <p class="desc">{{product.desc}}</p>
        <p class="rs"><span>Price:</span> &#8377; {{product.price}}</p>
        <div class="btns">
            {% if user.is_staff %}
            <a href="{% url 'edit_product' product.pk %}" class="btn edit">Edit</a>
            <a href="{% url 'delete_product' product.pk %}" class="btn delete">Delete</a>
            {% else %}

            {% if product.stock > 0 %}
            <button class="btn add add-to-cart">Add to Cart</button>
            {% else %}
            
            <button class="btn stock" aria-disabled="true">Out of Stock</button>
            {% endif %}
            {% endif %}
        </div>
    </div>
</section>
{% if user.is_staff %}
<section class="m-3 uploadimage">
    <div class="upload">
        <form method="post" enctype="multipart/form-data">
            {% csrf_token %}
            {% if form.non_field_errors %}
            <div class="alert alert-danger">
                {{ form.non_field_errors }}
            </div>
            {% endif %}

            {% for field in form %}
            {% include 'base/includes/basic_form_field.html' %}
            {% endfor %}
            <button type="submit" class="btn btn-outline-info">Upload</button>
        </form>
    </div>
</section>
{% endif %}

{% endblock %}